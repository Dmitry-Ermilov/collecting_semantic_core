<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>MiniApp: –°–±–æ—Ä —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ —è–¥—Ä–∞</title>
  <style>
    body { font-family: Arial; margin: 20px; background: #f7f7f7; }
    .container { max-width: 400px; margin: 0 auto; background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    h2 { text-align: center; }
    input, select, button { width: 100%; padding: 10px; margin: 10px 0; font-size: 16px; border-radius: 5px; border: 1px solid #ccc; }
    button { background: #0088cc; color: #fff; border: none; cursor: pointer; }
    button:hover { background: #006699; }
    .status { margin-top: 15px; text-align: center; }
  </style>
</head>
<body>
  <div class="container">
    <h2>–°–±–æ—Ä —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ —è–¥—Ä–∞</h2>
    <input type="text" id="phraseInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ñ—Ä–∞–∑—É">

    <select id="regionSelect">
      <option value="0">–í—Å—è –†–æ—Å—Å–∏—è</option>
      <option value="1">–ú–æ—Å–∫–≤–∞</option>
      <option value="2">–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥</option>
      <option value="3">–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫</option>
      <option value="4">–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥</option>
      <option value="5">–ö–∞–∑–∞–Ω—å</option>
    </select>

    <button id="sendDataBtn">–ü–æ–ª—É—á–∏—Ç—å —Ñ–∞–π–ª</button>
    <div class="status" id="status"></div>
  </div>

  <script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
    const tg = window.Telegram?.WebApp;
    const statusDiv = document.getElementById("status");
    const phraseInput = document.getElementById("phraseInput");
    const regionSelect = document.getElementById("regionSelect");
    const sendBtn = document.getElementById("sendDataBtn");

    if (!tg) {
      // –ï—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç –≤–Ω–µ Telegram
      statusDiv.style.color = "red";
      statusDiv.textContent = "‚ùå –ù–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å Telegram API. –û—Ç–∫—Ä–æ–π—Ç–µ —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞.";
      sendBtn.disabled = true; // –±–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É
    } else {
      // –ï—Å–ª–∏ WebApp –≤ Telegram
      tg.expand();
      statusDiv.style.color = "green";
      statusDiv.textContent = "‚úÖ WebApp API –¥–æ—Å—Ç—É–ø–µ–Ω!";

      sendBtn.addEventListener("click", function() {
        const phrase = phraseInput.value.trim();
        const region = regionSelect.value;

        if (!phrase) {
          statusDiv.style.color = "red";
          statusDiv.textContent = "‚ö† –í–≤–µ–¥–∏—Ç–µ —Ñ—Ä–∞–∑—É!";
          return;
        }

        // –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –±–æ—Ç—É
        tg.sendData(JSON.stringify({ phrase, region }));

        statusDiv.style.color = "blue";
        statusDiv.textContent = "üì® –î–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã... –∂–¥—ë–º –æ—Ç–≤–µ—Ç –±–æ—Ç–∞!";
      });
    }
  </script>
</body>
</html>
